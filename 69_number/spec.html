<!DOCTYPE html>

<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta name="description" content="[spec]Number変換">
  <meta name="author" content="online-simulator.github.io">
  <noscript>JavaScript is not enabled on browser.</noscript>
  <link rel="stylesheet" type="text/css" href="../00_common/css/common.css">
  <link rel="stylesheet" type="text/css" href="../00_common/css/color.css">
  <link rel="stylesheet" type="text/css" href="../00_common/css/size.css">
  <link rel="stylesheet" type="text/css" href="css/common.css">
  <link rel="stylesheet" type="text/css" href="css/color.css">
  <link rel="stylesheet" type="text/css" href="css/size.css">
</head>

<body>
  <div class="absolute">
    <table class="border">
      <caption>更新履歴</caption>
      <tbody>
        <tr class="border">
          <td class="border run">
Ver.0.39.4
          </td>
          <td class="border">
・radical(n)を追加
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.0.38.4
          </td>
          <td class="border">
・test caseを更新（Riemann予想の項目を追加）
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.0.37.4
          </td>
          <td class="border">
・本pageを分離して独立化
<br>
　<a href="../01_calc_simple/manual.html#span-out-num">[manual]Calculator</a>から本pageにtest caseを移動
<br>
・show Nrshift(m)の表示色を調整
<br>
・3*nの乗算記号*を省略を前提として一括削除
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.0.36.4
          </td>
          <td class="border">
・Number/BigIntの<span class="clear">Calculator入力（64bit）</span>に対応
<br>
MAX_SAFE_INTEGER -> 9007199254740991
<br>
3^2*5^6*7^3 -> 48234375
<br>
log2(3) -> 1.584962500721156
<br>
・solve 3n+1
<br>
0xfffff -> quality=1.6349626131746033
<br>
0xfffffffffffff -> quality=1.6041932699519255
<br>
・solve 3n-1
<br>
0xfffff+2 -> quality=1.718947382707015
<br>
(0xfffff+2)-2**5 -> quality=1.6161668176073567
<br>
0xfffffffffffff+2 -> quality=1.618710337301223
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.0.35.4
          </td>
          <td class="border">
・show primesを追加
<br>
・show Nrshift(m)の表示項目（=Nrshift(m)）を追加
<br>
・solve結果表示にquality:=log(nmax)/log(n)≒mmax/m（桁数の比）を追加
<br>
　m&gt;&gt;1の場合、quality&lt;1.6≒log2(3)
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.0.34.4
          </td>
          <td class="border">
・show Nrshift(m)の表示項目（演算過程）を追加
<br>
・solve結果表示にfloor(nmax/n)を追加
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.0.33.4
          </td>
          <td class="border">
・show Nrshift(m)を追加（m&lt;12）
<br>
・solve結果が循環の場合、1循環分の結果を追加表示
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.0.32.4
          </td>
          <td class="border">
・n=BigInt(string)を追加
<br>
・BigInt演算のsolve-buttonsを追加
          </td>
        </tr>
      </tbody>
    </table>
<br>
    <table class="border">
      <caption>UI</caption>
      <thead>
        <tr class="border">
          <th class="border">
項目
          </th>
          <th class="border">
内容
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="border">
          <td class="border">
n
          </td>
          <td class="border">
出力の自然数
          </td>
        </tr>
        <tr class="border">
          <td class="border">
string
          </td>
          <td class="border">
入力の文字列
          </td>
        </tr>
        <tr class="border">
          <td class="border">
My_eval(string)
<br>
<span class="run">Ver.0.36.4追加</span>
          </td>
          <td class="border">
n≦MAX_SAFE_INTEGERの場合、<a href="../01_calc_simple/manual.html#span-in-myeval">My_entry.eval</a>(string)を適用
          </td>
        </tr>
        <tr class="border">
          <td class="border">
clear
          </td>
          <td class="border">
stringを消去
          </td>
        </tr>
        <tr class="border">
          <td class="border">
convert
          </td>
          <td class="border">
parseInt/parseFloat/Number/BigIntの変換を実行
          </td>
        </tr>
        <tr class="border">
          <td class="vn">
show primes
<br>
<span class="run">Ver.0.35.4追加</span>
          </td>
          <td class="border">
素数の一覧を表示
          </td>
        </tr>
        <tr class="border">
          <td class="vn">
radical(n)
<br>
<span class="run">Ver.0.39.4追加</span>
          </td>
          <td class="border">
radical(n)を表示
          </td>
        </tr>
        <tr class="border">
          <td class="border">
show Nrshift(m)
<br>
<span class="run">Ver.0.33.4追加</span>
<br>
<span class="selection">Ver.0.37.4更新</span>
          </td>
          <td class="border">
桁数mに対する右shift可能回数の単純期待値を表示
<br>
<span class="selection">・表示色を調整</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
solve 3n-1
<br>
<span class="run">Ver.0.32.4追加</span>
          </td>
          <td class="border">
繰り返し実行
<br>
・nが奇数の場合、3n-1=(n&lt;&lt;1)+n-1の左shift相当演算
<br>
・nが偶数の場合、奇数になるまで右shift演算
          </td>
        </tr>
        <tr class="border">
          <td class="border">
solve 3n+1
<br>
<span class="run">Ver.0.32.4追加</span>
          </td>
          <td class="border">
繰り返し実行
<br>
・nが奇数の場合、3n+1=(n&lt;&lt;1)+n+1の左shift相当演算
<br>
・nが偶数の場合、奇数になるまで右shift演算
          </td>
        </tr>
      </tbody>
    </table>
<br>
    <table class="border">
      <caption>test case</caption>
      <thead>
        <tr class="border">
          <th class="border">
項目
          </th>
          <th class="border">
内容
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="border">
          <td class="border selection">
Collatz予想
          </td>
          <td class="border">
・nを任意の自然数の奇数として3n+1の下位3桁のbit列を2進数literalで昇順に列挙する
<br>
・((nのbit列&lt;&lt;1)+1)+(nのbit列)=(3n+1のbit列)
<br>
0b011+0b001=0b01<span class="clear">00</span>;
<br>
0b111+0b011=0b101<span class="clear">0</span>;
<br>
0b011+0b101=0b1<span class="clear">000</span>;
<br>
0b111+0b111=0b111<span class="clear">0</span>;
<br>
・右shift可能回数の<span class="clear">単純期待値&ge;7/4</span>&gt;log2(3)=1.58...（右shift優勢でn -> 1に再帰的帰着がCollatz予想）
<br>
0b0011+0b0001=0b001<span class="clear">00</span>;
<br>
0b0111+0b0011=0b0101<span class="clear">0</span>;
<br>
0b1011+0b0101=0b1<span class="clear">0000</span>;
<br>
0b1111+0b0111=0b1011<span class="clear">0</span>;
<br>
0b0011+0b1001=0b011<span class="clear">00</span>;
<br>
0b0111+0b1011=0b1001<span class="clear">0</span>;
<br>
0b1011+0b1101=0b11<span class="clear">000</span>;
<br>
0b1111+0b1111=0b1111<span class="clear">0</span>;
<br>
・下位4桁の場合、<span class="clear">単純期待値&ge;15/8</span>
<br>
0b00011+0b00001=0b0001<span class="clear">00</span>;
<br>
0b00111+0b00011=0b00101<span class="clear">0</span>;
<br>
0b01011+0b00101=0b01<span class="clear">0000</span>;
<br>
0b01111+0b00111=0b01011<span class="clear">0</span>;
<br>
0b10011+0b01001=0b0111<span class="clear">00</span>;
<br>
0b10111+0b01011=0b10001<span class="clear">0</span>;
<br>
0b11011+0b01101=0b101<span class="clear">000</span>;
<br>
0b11111+0b01111=0b10111<span class="clear">0</span>;
<br>
0b00011+0b10001=0b0101<span class="clear">00</span>;
<br>
0b00111+0b10011=0b01101<span class="clear">0</span>;
<br>
0b01011+0b10101=0b1<span class="clear">00000</span>;
<br>
0b01111+0b10111=0b10011<span class="clear">0</span>;
<br>
0b10011+0b11001=0b1011<span class="clear">00</span>;
<br>
0b10111+0b11011=0b11001<span class="clear">0</span>;
<br>
0b11011+0b11101=0b111<span class="clear">000</span>;
<br>
0b11111+0b11111=0b11111<span class="clear">0</span>;
<br>
・下位5桁の場合、<span class="clear">単純期待値&ge;31/16</span>
<br>
・下位m桁の場合、<span class="clear">単純期待値&ge;(2**m-1)/2**(m-1)</span> -> 2に漸近
<br>
・m=[1,11]の単純期待値から<span class="run">1回と2回以上の比率は同等</span>
<br>
1/1=(1){<span class="run">1</span>}/1;
<br>
3/2=(1,2){<span class="run">1</span>,1}/2;
<br>
7/4=(1,2,3){<span class="run">2</span>,1,1}/4;
<br>
15/8=(1,2,3,4){<span class="run">4</span>,2,1,1}/8;
<br>
31/16=(1,2,3,4,5){<span class="run">8</span>,4,2,1,1}/16;
<br>
63/32=(1,2,3,4,5,6){<span class="run">16</span>,8,4,2,1,1}/32;
<br>
127/64=(1,2,3,4,5,6,7){<span class="run">32</span>,16,8,4,2,1,1}/64;
<br>
255/128=(1,2,3,4,5,6,7,8){<span class="run">64</span>,32,16,8,4,2,1,1}/128;
<br>
511/256=(1,2,3,4,5,6,7,8,9){<span class="run">128</span>,64,32,16,8,4,2,1,1}/256;
<br>
1023/512=(1,2,3,4,5,6,7,8,9,10){<span class="run">256</span>,128,64,32,16,8,4,2,1,1}/512;
<br>
2047/1024=(1,2,3,4,5,6,7,8,9,10,11){<span class="run">512</span>,256,128,64,32,16,8,4,2,1,1}/1024;
<br>
・全桁の場合、1回が連続する全bit=1（0b1111...1111）とそれ以外の場合分け
<br>
・一方、3n-1の場合、右shift優勢でn -> 1||以下の循環に帰着
<br>
5->14->7->20->10->5
<br>
17->50->25->74->37->110->55->164->82->41->122->61->182->91->272->136->68->34->17
<br>
・(nのbit列&lt;&lt;1)+(nのbit列-1)=(3n-1のbit列)
<br>
0b010+0b000=0b001<span class="clear">0</span>;
<br>
0b110+0b010=0b1<span class="clear">000</span>;
<br>
0b010+0b100=0b011<span class="clear">0</span>;
<br>
0b110+0b110=0b11<span class="clear">00</span>;
<br>
0b0010+0b0000=0b0001<span class="clear">0</span>;
<br>
0b0110+0b0010=0b01<span class="clear">000</span>;
<br>
0b1010+0b0100=0b0111<span class="clear">0</span>;
<br>
0b1110+0b0110=0b101<span class="clear">00</span>;
<br>
0b0010+0b1000=0b0101<span class="clear">0</span>;
<br>
0b0110+0b1010=0b1<span class="clear">0000</span>;
<br>
0b1010+0b1100=0b1011<span class="clear">0</span>;
<br>
0b1110+0b1110=0b111<span class="clear">00</span>;
<br>
0b00010+0b00000=0b00001<span class="clear">0</span>;
<br>
0b00110+0b00010=0b001<span class="clear">000</span>;
<br>
0b01010+0b00100=0b00111<span class="clear">0</span>;
<br>
0b01110+0b00110=0b0101<span class="clear">00</span>;
<br>
0b10010+0b01000=0b01101<span class="clear">0</span>;
<br>
0b10110+0b01010=0b1<span class="clear">00000</span>;
<br>
0b11010+0b01100=0b10011<span class="clear">0</span>;
<br>
0b11110+0b01110=0b1011<span class="clear">00</span>;
<br>
0b00010+0b10000=0b01001<span class="clear">0</span>;
<br>
0b00110+0b10010=0b011<span class="clear">000</span>;
<br>
0b01010+0b10100=0b01111<span class="clear">0</span>;
<br>
0b01110+0b10110=0b1001<span class="clear">00</span>;
<br>
0b10010+0b11000=0b10101<span class="clear">0</span>;
<br>
0b10110+0b11010=0b11<span class="clear">0000</span>;
<br>
0b11010+0b11100=0b11011<span class="clear">0</span>;
<br>
0b11110+0b11110=0b1111<span class="clear">00</span>;
<br>
・無作為に奇数を選択する場合、3倍±1の演算後、右shift可能回数の期待値が無限大で2に漸近する
<br>
・全桁の場合、1回が連続する両端bit=1（0b1000...0001）とそれ以外の場合分け
<br>
・全桁数を表すbit列長が初期値の2倍（n*nのbit列長）を超えて発散するような予想の反例は見つかっていない
<br>
・m&gt;&gt;1でbit列長の比が1.6≒log2(3)をほぼ超えない
<br>
・以上より、3n=n+(n&lt;&lt;1)と±1の一律bit操作の反復過程で
<br>
・0連続部分（最上位bitの1桁上を含む）に形成されるbit列のrandom性が示唆される
<br>
・完全randomの場合、bit列長の比がlog2(3)到達以降、常に右shift優勢（無限大で3/4の期待値）が確定する
          </td>
        </tr>
        <tr class="border">
          <td class="border selection">
abc予想
          </td>
          <td class="border">
・他方、abc予想も同様に、qualityがbit列長の比と等価で1.6をほぼ超えない
<br>
quality:=log(c)/log(radical(abc))
<br>
・これはradical(abc)が右shiftでabcの桁数を最小化する操作であり、
<br>
・互いに素なa||b||cの最大値max(a,b,c)とradical(abc)のqualityの限界をa+b=cの拘束条件で示している
<br>
・quality≧1の場合、cが素数でない必要条件から、次のc'がc素因数の累乗積になる
<br>
c':=c/radical(c)≧2
<br>
radical(ab)≧2
<br>
quality:=log(c')/log(radical(ab))
<br>
・拘束条件がない場合、分母と分子が独立するため、qualityは2より大きな値を取り得る
          </td>
        </tr>
        <tr class="border">
          <td class="border selection">
Riemann予想
<br>
<span class="run">Ver.0.38.4追加</span>
          </td>
          <td class="border">
・nが素数の確率P（全素数の倍数にならない）
<br>
P(n)=(1-1/2)(1-1/3)(1-1/5)...
<br>
・r&lt;1の無限等比級数
<br>
1+r+r**2+r**3+...≒1/(1-r)
<br>
・P(n)の逆数を展開
<br>
1/P(n)=1/1+1/2+1/3+1/4+1/5+...+1/n+...
<br>
・素数定理（極限で成立）
<br>
P(n)≒1/log(n)
<br>
・素数計数関数π(x)の近似関数
<br>
Li(x):=P(n)を範囲[2,x]で積分
<br>
・素数計数関数の素数割合π(x)/xをqualityで代替する関数を示す（厳密には対応しない）
<br>
quality(x)=&lt;log(x!)/log(radical(x!));
<br>
pi_by_x(x)=&lt;1/quality(x);
<br>
・変数を定義
<br>
primes_rad=radical(x!);
<br>
linspace_round(x)=&lt;trans(round(trans(linspace(1,x,x))));
<br>
・logの和で展開
<br>
log_radical_fact(x)=&lt;sum(trans(log(trans(primes_rad))));
<br>
log_fact(x)=&lt;sum(trans(log(trans(linspace_round(x)))));
<br>
pi_by_x(x)=&lt;log_radical_fact(x)/log_fact(x);
<br>
・log2の和で展開（一律+1桁の操作のみでlogの和と大差なしを確認用）
<br>
log2_radical_fact(x)=&lt;sum(trans(log2(trans(primes_rad))+1));
<br>
log2_fact(x)=&lt;sum(trans(log2(trans(linspace_round(x)))+1));
<br>
pi_by_x(x)=&lt;log2_radical_fact(x)/log2_fact(x);
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</body>

</html>
