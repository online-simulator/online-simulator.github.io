<!DOCTYPE html>

<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta name="description" content="[spec]Incompressible flow">
  <meta name="author" content="online-simulator.github.io">
  <noscript>JavaScript is not enabled on browser.</noscript>
  <link rel="stylesheet" type="text/css" href="../00_common/css/common.css">
  <link rel="stylesheet" type="text/css" href="../00_common/css/color.css">
  <link rel="stylesheet" type="text/css" href="../00_common/css/size.css">
  <link rel="stylesheet" type="text/css" href="css/common.css">
  <link rel="stylesheet" type="text/css" href="css/color.css">
  <link rel="stylesheet" type="text/css" href="css/size.css">
</head>

<body>
  <div class="absolute">
    <table class="border">
      <caption>更新履歴</caption>
      <tbody>
        <tr class="border">
          <td class="border run">
Ver.1.54.2
          </td>
          <td class="border">
・tableを更新（流れ場を記述する方程式）
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.53.2
          </td>
          <td class="border">
・plot-dataの選択肢を追加
<br>
・testcaseを更新
          </td>
        </tr>
        <tr class="border">
          <td class="border clear">
Ver.1.52.2
          </td>
          <td class="border">
・Ver.1.41.0の再修正（plot用のpmin/pmaxの初期化の不具合を修正）
<br>
　既知要素のp値を変更：0　⇒　空欄（未知要素を除く）
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.52.1
          </td>
          <td class="border">
・tableを更新（流れ場を記述する方程式）
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.51.1
          </td>
          <td class="border">
・<a title="[manual]Calculator" href="../01_calc_simple/manual.html#span-out-UI-graphing-config">marker-colors</a>の更新に対応
<br>
・plot用canvasのORIGIN{}を更新（<a title="Graphing Calculator" href="../02_calc_graphing/index.html">Graphing Calculator</a>に準拠）
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.50.1
          </td>
          <td class="border">
・Ver.1.49.1のspec追記を取消し（<a title="[manual]Calculator" href="../01_calc_simple/manual.html#span-app-plane">[manual]Calculator</a>に内容を移植）
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.49.1
          </td>
          <td class="border">
・spec追記
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.48.1
          </td>
          <td class="border">
・?testcase=-11追加
<br>
・?testcase link-backstep-high_Reを追加表示
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.47.1
          </td>
          <td class="border">
・spec訂正
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.46.1
          </td>
          <td class="border">
・?testcase link-mazeを追加表示
<br>
・spec追記
          </td>
        </tr>
        <tr class="border">
          <td class="border clear">
Ver.1.45.1
          </td>
          <td class="border">
・pen描画の機能不全（約1week）を解消
<br>
　pen.js@Ver.6.389.267.19.103の実装上、input-Δframeが必須
<br>
　pen.jsの二重対策：options.dfのlimiterを追加
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.45.0
          </td>
          <td class="border">
・?testcase=34追加
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.44.0
          </td>
          <td class="border">
・?testcase=31追加（old 31~32　⇒　32~33）
<br>
・?testcase=29||30更新（Re=500　⇒　1e-3）
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.43.0
          </td>
          <td class="border">
・?testcase=-22||-23||-24||-25||-26追加（old -24　⇒　-22）
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.42.0
          </td>
          <td class="border">
・?testcase=-7||-24||-27追加
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.41.0
          </td>
          <td class="border">
・上段csv出力の仕様修正（行と列を転置）
<br>
　各軸を明示してcanvas表示通りに出力：u||v||p(y|x->)
<br>
　(u,v)指定要素のp値を変更：0　⇒　空欄
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.40.0
          </td>
          <td class="border">
・?testcase=32追加
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.39.0
          </td>
          <td class="border">
・?testcase=28||29||30||31追加
<br>
・spec追記
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.38.0
          </td>
          <td class="border">
・?testcase=-9||27追加
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.37.0
          </td>
          <td class="border">
・spec追記
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.36.0
<br>
Ver.1.35.0
          </td>
          <td class="border">
<del>・unit.js更新に伴い、math_com.jsを追加include</del>依存関係を解消
          </td>
        </tr>
        <tr class="border">
          <td class="border run">
Ver.1.34.0
          </td>
          <td class="border">
・Re/sx/syを時間tの関数化
<br>
・plot-dataにRe/sx/syを追加
<br>
・handler_calc.jsを新規作成
<br>
・testcaseを更新
          </td>
        </tr>
      </tbody>
    </table>
<br>
    <table class="border">
      <caption>流体流れの数値simulation（CFD解析）</caption>
      <thead>
        <tr class="border">
          <th class="border">
項目
          </th>
          <th class="border">
内容
          </th>
          <th class="border">
実装
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="border">
          <td class="border">
目的
          </td>
          <td class="border">
<span class="selection"><a href="../03_solver">[test]solver</a>の応用（解法のstep1）</span>
          </td>
          <td class="border">
解の厳密さよりcodeの簡潔さを優先
<br>
・pre/solver/post統合の最小構成
<br>
・3次元化を含む拡張が容易
          </td>
        </tr>
        <tr class="border">
          <td class="border" rowspan="3">
流体の種類
          </td>
          <td class="border">
実在の粘性流体
          </td>
          <td class="border">
非圧縮性のNewton流体を想定
<br>
・Mach数&lt;0.3
<br>
・動粘度ν=粘性係数/密度=const.
          </td>
        </tr>
        <tr class="border">
          <td class="border">
完全流体（非粘性の流体）
          </td>
          <td class="border">
Re無限大を想定
          </td>
        </tr>
        <tr class="border">
          <td class="border">
理想流体（非圧縮性の完全流体）
          </td>
          <td class="border">
通常、完全流体と同義
          </td>
        </tr>
        <tr class="border">
          <td class="border">
保存則
          </td>
          <td class="border">
無次元のNavier-Stokes方程式
<br>
無次元の連続の式（質量保存の式）
          </td>
          <td class="border">
直接、連立方程式のJacobi行列を構成して反復法で解くのは困難であり、
<br>
離散化した係数行列を優対角化する等、安定な解法が工夫される
<br>
・圧力のPoisson方程式（2階の楕円型偏微分方程式）を構成
<br>
・奇数階偏微分の移流項に数値粘性を導入
          </td>
        </tr>
        <tr class="border">
          <td class="border">
保存則の無次元化
          </td>
          <td class="border">
系内の代表||特性値から規格化
          </td>
          <td class="border">
代表||特性速さ：U
<br>
代表||特性長さ：L
          </td>
        </tr>
        <tr class="border">
          <td class="border selection">
解法
          </td>
          <td class="border">
Fractional Step法（FS法）
          </td>
          <td class="border">
step0: 現在の時間stepの未知変数を更新
<br>
step0.5: 非線形な移流拡散方程式から中間速度を陽的に算出
<br>
<span class="selection">step1: 線形な連立方程式から次の時間stepの未知変数を陰的に求解</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border selection">
solver@step1
          </td>
          <td class="border">
<a href="../01_calc_simple/manual.html#span-out-linear">Gaussの消去法</a>（直接解法）
          </td>
          <td class="border">
処理時間と演算costの大半を占有するが、Multi-thread化しない
<br>
<br>
反復解法と比較
<br>
・大規模行列の実用は不向き
<br>
　密行列の演算量=O(N**3)
<br>
　memory使用量=O(N**2)
<br>
・並列化は不向き（順次処理）
<br>
・収束判定不要
<br>
<br>
詳細は<a title="Graphing Calculator" href="../02_calc_graphing/index.html">Graphing Calculator-test case-methods</a>参照
<br>
・要素数Nに対する処理時間tの関係を仮定
<br>
　直接解法：t∝N**2.5
<br>
　反復解法：t∝N**2（不定）
<br>
・各step（step0.5||step1）の計測結果
<br>
　N=100: t=0||13[msec/step]
<br>
　N=400: t=0||318[msec/step]
<br>
　N=900: t=1||2213[msec/step]
          </td>
        </tr>
        <tr class="border">
          <td class="border">
DNS
<br>
<span class="run">Ver.1.37.0追加</span>
          </td>
          <td class="border">
乱流modelなし
<br>
保存則から直接数値simulation
          </td>
          <td class="border">
上記costから実用困難
<br>
・最小単位の渦scaleの解像度で離散化
<br>
<br>
Re&gt;&gt;1000の2次元計算から3次元現象の予測は困難
<br>
・本仕様で非現実的な境界条件を除外することで安定的に時間発展可能
          </td>
        </tr>
        <tr class="border">
          <td class="border">
乱流model
<br>
<span class="run">Ver.1.37.0追加</span>
          </td>
          <td class="border">
scale間の輸送をmodel式で記述
          </td>
          <td class="border">
DNSの代替として実用化
<br>
・現実的なcostで離散化
<br>
<br>
渦scale||scale間の輸送無視の非定常計算から定量評価は困難
<br>
・乱流modelは未実装（層流を想定）
          </td>
        </tr>
        <tr class="border">
          <td class="border">
渦scale
<br>
<span class="run">Ver.1.37.0追加</span>
          </td>
          <td class="border">
scaleの異なる渦の大きさ
          </td>
          <td class="border">
物体表面～後流で渦scaleが異なる
          </td>
        </tr>
        <tr class="border">
          <td class="border">
格子||grid
          </td>
          <td class="border">
2次元等間隔直交格子
          </td>
          <td class="border">
描画canvasのclient座標(x,y)を規格化
<br>
・左右がx方向（右向きが正）
<br>
・上下がy方向（下向きが正）
<br>
<br>
汎用的な有限要素法と比較
<br>
・格子生成が容易
<br>
・複雑形状の適合性が低い
          </td>
        </tr>
        <tr class="border">
          <td class="border">
解像度
          </td>
          <td class="border">
格子sizeに反比例
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
格子size
          </td>
          <td class="border">
grid-width
<br>
grid-height
          </td>
          <td class="border">
gridWidth=1~canvasWidth
<br>
gridhHeight=1~canvasHeight
          </td>
        </tr>
        <tr class="border">
          <td class="border">
要素
          </td>
          <td class="border">
1個の格子sizeの計算領域
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
既知要素
          </td>
          <td class="border">
rgbaで条件を指定する要素
          </td>
          <td class="border">
a&gt;0
          </td>
        </tr>
        <tr class="border">
          <td class="border">
未知要素
          </td>
          <td class="border">
未知変数を定義する要素
          </td>
          <td class="border">
a=0
          </td>
        </tr>
        <tr class="border">
          <td class="border">
p=0指定の未知要素
          </td>
          <td class="border">
全時間のgauge圧力が既知で
<br>
p(t)=0の要素
          </td>
          <td class="border">
a&gt;0
<br>
b=255
<br>
・求解上、系毎に1要素以上の指定が必須（testcase=12参照）
          </td>
        </tr>
        <tr class="border">
          <td class="border">
未知変数
          </td>
          <td class="border">
速度(u,v)
<br>
圧力p
          </td>
          <td class="border">
強連成@step1
<br>
・弱連成の場合、SOR法等で緩和後の擬圧力分布から速度場を更新
          </td>
        </tr>
        <tr class="border">
          <td class="border">
未知変数の定義点
          </td>
          <td class="border">
集中格子（要素中心）
          </td>
          <td class="border" rowspan="2">
一般的な有限体積法のFS法と比較
<br>
・staggered格子より数値誤差が蓄積しやすい
<br>
・fluxを厳密に考慮しない
<br>
・境界条件や保存量の評価手法が異なる
          </td>
        </tr>
        <tr class="border">
          <td class="border">
離散化手法
          </td>
          <td class="border">
<a href="../01_calc_simple/manual.html#span-out-fdm">有限差分法</a>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
保存特性
          </td>
          <td class="border">
解の厳密さ（保存則の満足度）
          </td>
          <td class="border">
保存量を指標として表示
          </td>
        </tr>
        <tr class="border">
          <td class="border">
1要素の保存量
          </td>
          <td class="border">
連続の式
          </td>
          <td class="border">
c=0（有限体積法の場合、要素毎に成立）
          </td>
        </tr>
        <tr class="border">
          <td class="border">
全要素の保存量
<br>
<span class="run">Ver.1.19.0更新</span>
          </td>
          <td class="border">
<del>領域外境界の体積流出入量</del>
<br>
<span class="run">全領域の連続の式</span>
          </td>
          <td class="border">
q=0（|q|&gt;1e-1で解が発散傾向）
          </td>
        </tr>
        <tr class="border">
          <td class="border">
計算対象の全領域
          </td>
          <td class="border">
全要素の計算領域
          </td>
          <td class="border">
1要素でp=0の不変を仮定できる十分な領域を取ることが望ましい
<br>
・Re依存で領域不足の場合、保存量が拡大し、dt依存で解が発散
          </td>
        </tr>
        <tr class="border">
          <td class="border">
境界条件の仮想点
          </td>
          <td class="border">
境界条件で仮定する境界外の補間点
          </td>
          <td class="border">
便宜上、仮想点を使用
<br>
・1分割の0~1次元計算が可能
          </td>
        </tr>
        <tr class="border">
          <td class="border">
領域外の境界条件
          </td>
          <td class="border">
(u,v,p)のNeumann条件
          </td>
          <td class="border">
境界の法線方向n
<br>
du/dn=dv/dn=dp/dn=0
          </td>
        </tr>
        <tr class="border">
          <td class="border">
既知要素の境界条件0
          </td>
          <td class="border">
(u,v)のDirichlet条件
<br>
pのNeumann条件
          </td>
          <td class="border">
(u,v)=(r/255,g/255)
<br>
dp/dn=0
<br>
境界位置が不正確（実質、要素中心に界面が存在）
<br>
有限差分法の場合、粘性項のfluxが不正確
          </td>
        </tr>
        <tr class="border">
          <td class="border">
既知要素の境界条件1
<br>
<span class="run">Ver.1.7.0追加</span>
          </td>
          <td class="border">
(u,v)のNeumann条件
<br>
pのNeumann条件
          </td>
          <td class="border">
境界面の(u,v)を指定値として内側1点から仮想点に線形外挿
<br>
<span class="run">(u,v)=lerp(r/255,g/255)</span>
<br>
dp/dn=0
<br>
境界条件0より境界位置が厳密で全要素の保存量が改善
<br>
有限差分法の場合、粘性項のfluxが不正確
          </td>
        </tr>
        <tr class="border">
          <td class="border">
中間速度@step0.5
          </td>
          <td class="border">
圧力分布なしの速度場
          </td>
          <td class="border">
不連続が大きい場合、有限の領域境界で解が破綻しやすい
          </td>
        </tr>
        <tr class="border">
          <td class="border">
移流項scheme@step0.5
<br>
<span class="run">Ver.1.17.0追加</span>
<br>
<span class="selection">Ver.1.31.0更新</span>
          </td>
          <td class="border">
1<span class="selection">~</span>3次精度の上流差分（非保存型）
          </td>
          <td class="border">
数値不安定な中心差分に数値粘性を付加
<br>
・1次精度の場合、2階偏微分の誤差からReを過小評価（要解像度）
<br>
<span class="run">・数値粘性の適用率を調整可</span>
<br>
<br>
scheme=o1<span class="selection">||o2</span>||o3
          </td>
        </tr>
        <tr class="border">
          <td class="border">
粘性項@step0.5
<br>
<span class="selection">Ver.1.31.0更新</span>
<br>
<span class="jF">Ver.1.32.0追加</span>
          </td>
          <td class="border">
2||4次精度の中心差分
          </td>
          <td class="border">
<del>scheme=o1<span class="selection">~2</span>||o3</del>
<br>
<span class="jF">diffusion=o2||o4</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
時間積分@step0.5
<br>
<span class="jF">Ver.1.32.0更新</span>
          </td>
          <td class="border">
1~3次精度のAdams-Bashforth法
          </td>
          <td class="border">
time=<span class="jF">o1</span>||o2<span class="jF">||o3</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
連続の式||圧力項@step1
          </td>
          <td class="border">
2次精度の中心差分
          </td>
          <td class="border">
有限体積法の場合、2次精度（<span class="clear">4次精度は未実装</span>）
<br>
・本来、中間速度の仮想点は不要
<br>
・有限差分法との整合性から境界条件1が望ましい
          </td>
        </tr>
        <tr class="border">
          <td class="border" rowspan="2">
最適化
<br>
<span class="run">Ver.1.4.0追加</span>
<br>
<span class="condition">Ver.1.28.0追加</span>
<br>
<span class="selection">Ver.1.31.0更新</span>
<br>
<span class="jF">Ver.1.32.0追加</span>
          </td>
          <td class="border">
処理時間の低減
          </td>
          <td class="border">
差分式の演算
<br>
・除算を含む係数をまとめて乗算に変換
<br>
<br>
scheme<span class="jF">||order</span>の切替
<br>
<del>・if文を削除（関数で切替）</del><span class="selection">Ver.1.31.0以降、効果少で削除</span>
<br>
・if文で切替（<span class="clear">関数で切替は未実装</span>）
<br>
<br>
境界条件の切替
<br>
・if文で切替（<span class="clear">関数で切替は未実装</span>）
<br>
<br>
境界位置の切替
<br>
・if文で切替（<span class="clear">関数で切替は未実装</span>）
<br>
<br>
solver
<br>
・COO形式<span class="run">⇒LIL形式</span>
<br>
<span class="condition">・不要な複製処理を削除して速度の配列を共通化（順次更新）</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
演算costの低減
          </td>
          <td class="border">
<span class="jF">時間積分用の配列
<br>
・time選択値から追加で複製</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border" rowspan="3">
安定化
<br>
<span class="condition">Ver.1.13.0更新</span>
<br>
<span class="run">Ver.1.17.0更新</span>
          </td>
          <td class="border">
解が発散時の対策
          </td>
          <td class="border">
時間刻みを小さくする
<br>
・流出境界で逆流が存在する場合、|Ndt|&gt;&gt;1（逆流支配で解がNaN）
<br>
・非粘性に近い場合（Re無限大）、|Ndt|&gt;&gt;1
<br>
・粘性が支配的な場合（Re≒0）、|Ndt|&gt;&gt;<span class="condition">10</span>（<span class="clear">粘性項の陰解法は未実装</span>）
<br>
<span class="run">・scheme-a依存の数値粘性が分子粘性より支配的な場合、|Ndt|&gt;&gt;1</span>
<br>
<br>
初期値を見直す
<br>
・Re&gt;&gt;1000の場合、徐々にReを上げる（testcase=-1||9参照）
          </td>
        </tr>
        <tr class="border">
          <td class="border">
解がNaN時の対策
          </td>
          <td class="border">
領域を見直す
<br>
・閉じた領域が残存する場合、塗りつぶす
<br>
・助走区間不足の場合、領域を広げる
<br>
・p=0指定の未知要素が複数存在する場合、領域を広げて結合する
          </td>
        </tr>
        <tr class="border">
          <td class="border">
page未応答時の対策
          </td>
          <td class="border">
描画頻度を上げる
<br>
・格子sizeを大きくする
<br>
・Nntを小さくする
          </td>
        </tr>
      </tbody>
    </table>
<br>
    <table class="border">
      <caption>主な無次元数</caption>
      <thead>
        <tr class="border">
          <th class="border">
項目
          </th>
          <th class="border">
内容
          </th>
          <th class="border">
実装
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="border">
          <td class="border">
Mach数
          </td>
          <td class="border">
慣性力/弾性力
          </td>
          <td class="border">
Ma=U/音速
<br>
Ma&gt;1: 超音速
<br>
Ma&lt;0.3: 非圧縮性を想定（弾性力が支配的）
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Reynolds数
          </td>
          <td class="border">
慣性力/粘性力
          </td>
          <td class="border">
Re=U*L/ν
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Froude数
          </td>
          <td class="border">
慣性力/外力
          </td>
          <td class="border">
Fr=U/(L*加速度の大きさ)^0.5
<br>
Fr&gt;1: 射流（Fr&gt;&gt;1の場合、慣性が支配的）
<br>
Fr=1: 限界流
<br>
Fr&lt;1: 常流（Fr&lt;&lt;1の場合、外力が支配的）
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Strouhal数
          </td>
          <td class="border">
振動現象の周波数を無次元化
          </td>
          <td class="border">
St=周波数*L/U
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Rayleigh数
          </td>
          <td class="border">
浮力/温度拡散率
          </td>
          <td class="border">
Ra&lt;臨界値: 熱拡散による熱輸送（熱伝導が支配的）
<br>
Ra&gt;臨界値: 対流による熱輸送（対流を形成）
          </td>
        </tr>
      </tbody>
    </table>
<br>
    <table class="border">
      <caption>流れ場を記述する方程式</caption>
      <thead>
        <tr class="border">
          <th class="border">
項目
          </th>
          <th class="border">
内容
          </th>
          <th class="border">
実装
          </th>
          <th class="border">
<a title="Graphing Calculator" href="../02_calc_graphing/index.html">Graphing Calculator</a><br><span class="clear"><a title="[manual]Calculator" href="../01_calc_simple/manual.html#span-out-UI-graphing-testcase">test case</a></span>
<br>
<span class="run">Ver.1.52.1追加</span>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="border">
          <td class="border">
Navier-Stokes方程式
          </td>
          <td class="border">
運動量保存の式
          </td>
          <td class="border">
移流項
<br>
圧力項（圧力勾配項）
<br>
粘性項（分子粘性項）
<br>
生成項（重力を含む外力項）
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Euler方程式
          </td>
          <td class="border">
粘性項なし（慣性が支配的⇒粘性を無視）
          </td>
          <td class="border">
Re無限大
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Stokes方程式
          </td>
          <td class="border">
移流項なし（粘性が支配的⇒慣性を無視）
          </td>
          <td class="border">
Re≒0
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
<span class="run">Bateman-</span>Burgers方程式
<br>
移流拡散方程式
          </td>
          <td class="border">
圧力項なし（連続の式を無視）
          </td>
          <td class="border">
圧力分布なしの中間速度
          </td>
          <td class="border">
<span class="wF">Bateman-Burgers</span>
<br>
<span class="wF">advection-diffusion</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
移流方程式
          </td>
          <td class="border">
粘性項なし
<br>
圧力項なし
          </td>
          <td class="border">
Re無限大の中間速度
          </td>
          <td class="border">
<span class="wF">advection</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
拡散方程式
          </td>
          <td class="border">
移流項なし
<br>
圧力項なし
          </td>
          <td class="border">
Re≒0の中間速度
          </td>
          <td class="border">
<span class="wF">diffusion</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Langevin方程式
<br>
<span class="run">Ver.1.54.2追加</span>
          </td>
          <td class="border">
Brown運動を記述する確率微分方程式
          </td>
          <td class="border">
各軸独立の正規分布に従う
<br>
random力を仮定
<br>
（連続性を考慮）
          </td>
          <td class="border">
<span class="selection">Langevin</span>
<br>
<span class="selection">Brown</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
random-walk
<br>
<span class="run">Ver.1.39.0追加</span>
<br>
<del><span class="condition">Ver.1.46.1追記</span></del>
<br>
<span class="run">Ver.1.52.1移植</span>
<br>
<span class="run">Ver.1.54.2更新</span>
          </td>
          <td class="border">
流体中の微粒子の軌跡表現
          </td>
          <td class="border">
均一な媒体中で不規則な
<br>
等方性の等速運動を想定
<br>
（不連続）
          </td>
          <td class="border">
random-walk
          </td>
        </tr>
      </tbody>
    </table>
<br>
    <table class="border">
      <caption>URL-parameter@browser上部URL入力欄</caption>
      <thead>
        <tr class="border">
          <th class="border">
項目
          </th>
          <th class="border">
内容
          </th>
          <th class="border">
実装
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="border">
          <td class="border">
nmax
<br>
<span class="run">Ver.1.12.0追加</span>
          </td>
          <td class="border">
描画更新の最大回数
          </td>
          <td class="border">
start~自動停止の間
          </td>
        </tr>
        <tr class="border">
          <td class="border">
plot-canvas-width
<br>
plot-canvas-height
<br>
<span class="run">Ver.1.21.0追加</span>
          </td>
          <td class="border">
plot用canvas-size
          </td>
          <td class="border">
その他、<a href="../01_calc_simple/manual.html#span-out-UI-graphing-config">plot-config</a>参照
          </td>
        </tr>
        <tr class="border">
          <td class="border">
testcase
<br>
<span class="run">Ver.1.5.0追加</span>
<br>
<span class="condition">Ver.1.6.0追加</span>
<br>
<span class="selection">Ver.1.7.0追加</span>
<br>
<span class="jF">Ver.1.12.0追加
<br>
全data軽量化svg⇒png</span>
<br>
<span class="clear">Ver.1.14.0追加</span>
<br>
<span class="wF">Ver.1.15.0追加</span>
<br>
<span class="wF">Ver.1.20.0追加</span>
<br>
<span class="wF">Ver.1.26.0追加</span>
<br>
<span class="wF">Ver.1.29.0追加</span>
<br>
<span class="clear">Ver.1.34.0更新</span>
<br>
<span class="wF">Ver.1.38.0追加</span>
<br>
<span class="wF">Ver.1.39.0追加</span>
<br>
<span class="wF">Ver.1.40.0追加</span>
<br>
<span class="wF">Ver.1.42.0追加</span>
<br>
<span class="wF">Ver.1.43.0追加</span>
<br>
<span class="wF">Ver.1.44.0追加</span>
<br>
<span class="wF">Ver.1.45.0追加</span>
<br>
<span class="wF">Ver.1.48.1追加</span>
<br>
<del><span>Ver.1.49.1追記</span></del>
<br>
<span class="pF">Ver.1.53.2更新</span>
          </td>
          <td class="border">
test case
          </td>
          <td class="border">
<span class="wF"><span class="clear">-1</span>: backstep流れの再付着点距離の検証
<br>
・U=inlet平均速さUi（redを指定）
<br>
・L=step高さS（Lyを設定）
<br>
・ReS:=Ui*S/ν
<br>
・ReS=200,400,600に対して
<br>
・t&gt;&gt;100で評価する
<br>
<span class="pF">・付着面直近の速度をplot: (x,u[][8])</span>
<br>
・無次元の再付着点距離=約5,7,10（助走区間長=1、inlet未発達）
<br>
・無次元の再付着点距離=約6,9,11（助走区間長=3）
<br>
・ReS≒800以降、乱流遷移で再付着点距離が減少傾向
<br>
・実験も同様、流れ場が徐々に3次元化</span>
<br>
0: 左右の一様流
<br>
1: 上下の一様流
<br>
<span class="condition">2: 斜めの一様流</span>
<br>
3: 左右のKármán渦列（領域不足、Ly=3相当のRe）
<br>
・scheme=o3
<br>
・Ly=3
<br>
<span class="pF">・後流の速度をplot: (t,u||v[4][4])</span>
<br>
・Re&gt;20でSt≒0.2
<br>
<span class="condition">4: 上下のKármán渦列（同上）</span>
<br>
<span class="selection"><span class="clear">|5|</span>: 左右のKármán渦列（同上）</span>
<br>
<span class="selection">6: 上下のKármán渦列（同上）</span>
<br>
<span class="run"><span class="wF">|7|</span>: Hagen-Poiseuille流れ</span>
<br>
<span class="selection">8: cavity流れ（速度指定）</span>
<br>
<span class="selection"><span class="clear">|9|</span>: cavity流れ（圧力指定）</span>
<br>
10: cavity流れ（模擬条件）
<br>
<span class="condition">11: backstep流れ（領域不足、助走区間不足、Ly=2相当のReS）</span>
<br>
<span class="wF">-11: backstep流れ（高Reの検討、領域不足、解像度不足）</span>
<br>
12: cavity+backstep流れ（解像度不足）
<br>
<span class="jF">13: 合流の一様流</span>
<br>
<span class="jF">14: 対称な合流（圧力分布なしの中間速度を表示）</span>
<br>
<span class="jF">15: 非対称な合流（同上）</span>
<br>
<span class="clear">16: 左右の不連続流（同上）</span>
<br>
<span class="clear">17: 上下の不連続流（同上）</span>
<br>
<span class="wF">18: 左右の合流</span>
<br>
<span class="wF">19: 上下の合流</span>
<br>
<span class="wF">20: 右斜め下方向の合流</span>
<br>
<span class="wF">21: 左斜め下方向の合流</span>
<br>
<span class="wF">22: 左斜め下方向の合流（圧力分布なしの中間速度を表示）</span>
<br>
<span class="wF">23: 閉空間の循環流（速度指定）</span>
<br>
<span class="wF">24: 閉空間の循環流（圧力指定）</span>
<br>
<span class="wF">-22~-26: 閉空間の循環流（圧力指定）</span>
<br>
・磁石の磁力線のanalogy：速度⇔磁束密度、渦糸⇔導線
<br>
・-22：磁石単体の磁力線
<br>
・-23：NS相互作用の引力
<br>
・-24：NN相互作用の斥力
<br>
・-25：SS相互作用の斥力
<br>
・-26：SS相互作用の斥力（右側の磁束密度を左側の2倍）
<br>
<span class="wF">25: 蛇行流（速度指定、解像度不足）</span>
<br>
<span class="wF">26: 蛇行流（圧力指定、解像度不足）</span>
<br>
<span class="wF">|27|: 合流の少ない単純な迷路</span>
<br>
・流路の流れやすさで流出入の圧力差が減少
<br>
<span class="wF">28: Bénard対流2cells模擬（水平方向）</span>
<br>
<span class="wF">29: Bénard対流2cells模擬（周方向）</span>
<br>
<span class="wF">30: Bénard対流4cells模擬（周方向）</span>
<br>
<span class="wF">31: Bénard対流6cells模擬（周方向）</span>
<br>
・周期境界の場合、偶数個cells
<br>
<span class="wF">32: 大規模循環流</span>
<br>
<span class="wF">33: 翼断面（領域不足、助走区間不足、解像度不足）</span>
<br>
・揚力：推進中に翼の下面（正圧）と上面（負圧）の圧力差で生じる上向きの力
<br>
・翼形状：上面の流れがはく離なしで合流する最適形状の流線形（はく離で失速）
<br>
<span class="wF">34: 一様流の中で渦糸が受けるMagnus効果（領域不足、助走区間不足、解像度不足）</span>
<br>
・back-spinの場合、上向きの揚力
          </td>
        </tr>
      </tbody>
    </table>
<br>
    <table class="border">
      <caption>UI設定</caption>
      <thead>
        <tr class="border">
          <th class="border">
項目
          </th>
          <th class="border">
内容
          </th>
          <th class="border">
実装
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="border">
          <td class="border">
i=0~Ni-1
          </td>
          <td class="border">
x方向の要素index
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
j=0~Nj-1
          </td>
          <td class="border">
y方向の要素index
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Ni=1~
          </td>
          <td class="border">
x方向の要素数
          </td>
          <td class="border">
Ni=ceil(canvasWidth/round(gridWidth))
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Nj=1~
          </td>
          <td class="border">
y方向の要素数
          </td>
          <td class="border">
Nj=ceil(canvasHeight/round(gridHeight))
<br>
割り切れない場合、pre/post表示の座標に乖離あり
          </td>
        </tr>
        <tr class="border">
          <td class="border">
dx
<br>
<span class="clear">Ver.1.1.0変更</span>
          </td>
          <td class="border">
x方向の無次元grid刻み幅
          </td>
          <td class="border">
<span class="clear"><del>dx=1/Ni</del></span>
<br>
<span class="clear">dx=dy*round(gridWidth)/round(gridHeight)</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
dy
<br>
<span class="clear">Ver.1.1.0変更</span>
<br>
<span class="run">Ver.1.10.0変更</span>
          </td>
          <td class="border">
y方向の無次元grid刻み幅
          </td>
          <td class="border">
<span class="clear"><del>dy=dx*round(gridHeight)/round(gridWidth)</del></span>
<br>
<span class="clear">dy=<span class="run">Ly</span>/Nj</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Lx
<br>
<span class="run">Ver.1.10.0追加</span>
          </td>
          <td class="border">
x方向の無次元全長
          </td>
          <td class="border">
Lx=dx*Ni
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Ly
<br>
<span class="run">Ver.1.10.0追加</span>
          </td>
          <td class="border">
y方向の無次元全長
          </td>
          <td class="border">
L=1から換算
          </td>
        </tr>
        <tr class="border">
          <td class="border">
rgba=0~255
          </td>
          <td class="border">
pixelのRGBA
          </td>
          <td class="border">
要素左上のpixelを判定
<br>
a&gt;0 -> 既知要素
<br>
a=0 -> 未知要素
          </td>
        </tr>
        <tr class="border">
          <td class="border">
(u,v)=(r/255,g/255)
<br>
<span class="wF">Ver.1.20.0追加</span>
          </td>
          <td class="border">
無次元速度vector
          </td>
          <td class="border">
blackを含むr=g=0で壁指定
<br>
<span class="wF">b=1 -> uの符号反転</span>
<br>
<span class="wF">b=2 -> vの符号反転</span>
<br>
<span class="wF">b=3 -> uvの符号反転</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
p
          </td>
          <td class="border">
無次元gauge圧力
          </td>
          <td class="border">
p=0指定の未知要素@b=255
<br>
・境界条件の都合上、流出側の指定が妥当
<br>
・b=255未定義時、右下の未知要素p=0
<br>
・(u,v)の同時指定不可
          </td>
        </tr>
        <tr class="border">
          <td class="border">
t
          </td>
          <td class="border">
無次元時間
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Re<span class="condition">=Re(t)</span>
<br>
<span class="condition">Ver.1.34.0更新</span>
          </td>
          <td class="border">
Reynolds数
          </td>
          <td class="border">
<del>y方向の全長=1と(u,v)から実際の問題に換算が必要
<br>
例）代表長さが全長の半分の場合、実際のReは指定値の半分</del>
<br>
<span class="run">Ver.1.10.0</span>以降、Lyと(u,v)から実際の問題に換算が必要
          </td>
        </tr>
        <tr class="border">
          <td class="border">
(sx,sy)<span class="condition">=(sx(t),sy(t))</span>
<br>
<span class="run">Ver.1.27.0追加</span>
<br>
<span class="condition">Ver.1.34.0更新</span>
          </td>
          <td class="border">
無次元の生成項vector
          </td>
          <td class="border">
s=1/Fr^2
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Ndt
<br>
<span class="selection">Ver.1.11.0追加</span>
          </td>
          <td class="border">
dtmaxの分割数
          </td>
          <td class="border">
<span class="selection">Ndt&lt;0の場合、CFL条件適応の時間刻みの時間発展</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
dt
          </td>
          <td class="border">
時間発展の時間刻み
          </td>
          <td class="border">
dt=dtmax/<span class="selection">|Ndt|</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
dtmax
<br>
<span class="condition">Ver.1.13.0更新</span>
          </td>
          <td class="border">
時間刻み最大値
          </td>
          <td class="border">
<span class="condition">dtmax=min(dtmax_CFL,dtmax_VNSA)</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
dtmax_CFL
<br>
<span class="selection">Ver.1.11.0追加</span>
          </td>
          <td class="border">
CFL条件を満たす時間刻み最大値
          </td>
          <td class="border">
Ndt&ge;0 -> 固定dtmax_CFL=min(dx,dy)/1
<br>
<span class="selection">Ndt&lt;0 -> 可変dtmax_CFL=min(dx/(max(|u|)||1),dy/(max(|v|)||1))</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
dtmax_VNSA
<br>
<span class="condition">Ver.1.13.0追加</span>
<br>
<span class="clear">Ver.1.17.0更新</span>
          </td>
          <td class="border">
拡散の安定条件を満たす時間刻み最大値
          </td>
          <td class="border">
<span class="condition">dtmax_VNSA=0.5*Re*min(dx*dx,dy*dy)</span>
<br>
<span class="clear">・数値粘性は未考慮</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
Nnt=1~1000
<br>
<span class="run">Ver.1.12.0追加</span>
          </td>
          <td class="border">
描画更新の間隔
          </td>
          <td class="border">
時間間隔=Nnt*dt
          </td>
        </tr>
        <tr class="border">
          <td class="border">
c
<br>
<span class="clear">Ver.1.3.0削除</span>
<br>
<span class="run">Ver.1.9.0復帰</span>
          </td>
          <td class="border">
1要素の保存量最大値
          </td>
          <td class="border">
<del><span class="clear">厳密な評価困難で流量qの指標で代替</span></del>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
q
<br>
<span class="run">Ver.1.3.0追加</span>
<br>
<span class="run">Ver.1.19.0更新</span>
          </td>
          <td class="border">
全要素の保存量
          </td>
          <td class="border">
2次精度の<a href="../01_calc_simple/manual.html#span-out-fdm-integral">数値積分</a>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
start
          </td>
          <td class="border">
計算開始/再開button
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
stop
          </td>
          <td class="border">
計算一時停止button
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
scheme=o3||<span class="selection">o2||</span>o1
<br>
<span class="selection">Ver.1.31.0追加</span>
          </td>
          <td class="border">
移流項の差分精度次数の選択
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
scheme-a
<br>
<span class="run">Ver.1.17.0追加</span>
<br>
<span class="selection">Ver.1.31.0更新</span>
          </td>
          <td class="border">
数値粘性の適用率
          </td>
          <td class="border">
a=0 -> (order+1)次精度の中心差分<span class="selection">@o1||o3</span>
<br>
a=1 -> (order+0)次精度の上流差分
<br>
a=3 -> Kawamura-Kuwahara scheme@o3
          </td>
        </tr>
        <tr class="border">
          <td class="border">
diffusion=o4||o2
<br>
<span class="jF">Ver.1.32.0追加</span>
          </td>
          <td class="border">
粘性項の差分精度次数の選択
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
time=o3||o2||o1
<br>
<span class="jF">Ver.1.32.0追加</span>
          </td>
          <td class="border">
時間積分の精度次数の選択
          </td>
          <td class="border">
描画更新毎に追加の配列を確保（常に保持しない）
          </td>
        </tr>
        <tr class="border">
          <td class="border">
bound=境界条件0||1
<br>
<span class="run">Ver.1.7.0追加</span>
          </td>
          <td class="border">
既知要素の境界条件の種類
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
k_arrow=<span class="run">-100~</span>100
<br>
<span class="run">Ver.1.15.0追加</span>
          </td>
          <td class="border">
post表示用
<br>
矢印のsize倍率=|k_arrow|
          </td>
          <td class="border">
<span class="run">k_arrow&gt;0の場合、矢印全体をre-size（始点基準）</span>
<br>
k_arrow&le;0の場合、矢印部分をre-size（終点基準）
<br>
<br>
矢印はcanvas中面に描画
<br>
矢印vector:=(u,v)
          </td>
        </tr>
        <tr class="border">
          <td class="border">
arrow-color
<br>
<span class="run">Ver.1.16.0追加</span>
          </td>
          <td class="border">
post表示用
<br>
矢印の色
          </td>
          <td class="border">
<span class="run">矢印の色:=black（固定）</span>
<br>
<br>
<span class="run">矢印の色（青～緑～黄～橙～赤）:=|velocity|（最低値～最高値）</span>
<br>
<br>
矢印の色（青～緑～黄～橙～赤）:=pressure（最低値～最高値）
<br>
・圧力分布なしの場合、黒色
<br>
・既知要素p=0（境界条件を未代入）
          </td>
        </tr>
        <tr class="border">
          <td class="border">
arrows=false||true
<br>
<span class="run">Ver.1.8.0追加</span>
          </td>
          <td class="border">
矢印のdownloadを有効化
          </td>
          <td class="border">
png出力はcanvas中面を出力（grid||矢印のみ）
          </td>
        </tr>
        <tr class="border">
          <td class="border">
download-csv
<br>
<span class="run">Ver.1.18.0追加</span>
<br>
<span class="jF">Ver.1.41.0修正</span>
<br>
<span class="condition">Ver.1.52.2再修正</span>
          </td>
          <td class="border">
(u,v,p)のdownload機能
          </td>
          <td class="border">
<span class="jF">各軸を明示してcanvas表示通りに出力：u||v||p(y|x->)</span>
<br>
・<span class="jF">横軸</span>: 要素中心のx座標
<br>
・<span class="jF">縦軸</span>: 要素中心のy座標
<br>
・<span class="jF"><span class="condition">既知</span>要素のp値を変更：0　⇒　空欄</span><span class="condition">（未知要素を除く）</span>
<br>
<br>
<span class="clear">再downloadのbrowser-blockあり（保存file更新の許可が必要）</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
plot
<br>
<span class="run">Ver.1.22.0追加</span>
<br>
<span class="condition">Ver.1.30.0更新</span>
<br>
<span class="jF">Ver.1.47.1訂正</span>
<br>
<span class="selection">Ver.1.53.2更新</span>
          </td>
          <td class="border">
plotするdataの選択
          </td>
          <td class="border">
時系列の(t,data)をplot用canvasに描画
<br>
<span class="condition">・u[i][j]/v[i][j]<span class="jF">/</span>p[i][j]のdata追加（St検証用）</span>
<br>
<span class="selection">・(x,u[][j]/v[][j]/p[][j])の選択肢を追加（plot専用）</span>
<br>
<span class="selection">・(y,u[i][]/v[i][]/p[i][])の選択肢を追加（plot専用）</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
plot-(i,j)
<br>
<span class="run">Ver.1.30.0追加</span>
          </td>
          <td class="border">
plotする変数の要素index
          </td>
          <td class="border">
範囲外の場合、0||最終indexを参照
          </td>
        </tr>
        <tr class="border">
          <td class="border">
plot-
<br>
download-png/svg
<br>
<span class="run">Ver.1.23.0追加</span>
          </td>
          <td class="border">
imageのdownload機能
          </td>
          <td class="border">
png出力は停止中のみ
          </td>
        </tr>
        <tr class="border">
          <td class="border">
plot-
<br>
download-csv
<br>
<span class="run">Ver.1.24.0追加</span>
<br>
<span class="selection">Ver.1.53.2更新</span>
          </td>
          <td class="border">
<span class="selection">時系列の</span>(t,data)のdownload機能
          </td>
          <td class="border">
<span class="selection">時系列の全dataを出力</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</body>

</html>
