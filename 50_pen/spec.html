<!DOCTYPE html>

<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta name="description" content="[spec]筆penの設定">
  <meta name="author" content="online-simulator.github.io">
  <noscript>JavaScript is not enabled on browser.</noscript>
  <link rel="stylesheet" type="text/css" href="../00_common/css/common.css">
  <link rel="stylesheet" type="text/css" href="../00_common/css/color.css">
  <link rel="stylesheet" type="text/css" href="../00_common/css/size.css">
  <link rel="stylesheet" type="text/css" href="css/common.css">
  <link rel="stylesheet" type="text/css" href="css/color.css">
  <link rel="stylesheet" type="text/css" href="css/size.css">
</head>

<body>
  <div class="absolute">
    <table class="border">
      <caption>筆penの設定</caption>
      <thead>
        <tr class="border">
          <th class="border">
項目
          </th>
          <th class="border">
内容
          </th>
          <th class="border">
実装
          </th>
        </tr>
      </thead>
      <tbody>
        <tr class="border">
          <td class="border text-center condition" colspan="3">
定義
          </td>
        </tr>
        <tr class="border">
          <td class="border">
w=0~W[px]
          </td>
          <td class="border">
line幅
          </td>
          <td class="border">
w可変の従属parameterを選択可
<br>
・w=w(f)=w(p)
<br>
・w=w(f)=w(len)
          </td>
        </tr>
        <tr class="border">
          <td class="border">
p=0~1
          </td>
          <td class="border">
筆圧
          </td>
          <td class="border">
p=p(f)
          </td>
        </tr>
        <tr class="border">
          <td class="border">
len=0~[px]
          </td>
          <td class="border">
筆中心の移動量
          </td>
          <td class="border">
len=len(f)=|dxy(f)|
          </td>
        </tr>
        <tr class="border">
          <td class="border">
xy={x,y}
          </td>
          <td class="border">
筆中心のcanvas座標
          </td>
          <td class="border">
xy=xy(f)={x(f),y(f)}
<br>
dxy(f)=xy(f)-xy(f-1)={dx(f),dy(f)}
<br>
・列vector
<br>
・offset前
          </td>
        </tr>
        <tr class="border">
          <td class="border">
xy_old
          </td>
          <td class="border">
確定line上のold点の総称
          </td>
          <td class="border">
直近から列挙
<br>
xy(f-1)
<br>
xy(f-2)
<br>
xy(f-3)
<br>
...
          </td>
        </tr>
        <tr class="border">
          <td class="border">
xy_pointer
          </td>
          <td class="border">
pointerのcanvas座標
<br>
cursor位置
          </td>
          <td class="border">
xy(0)=xy_pointer(0)
<br>
・offset前
          </td>
        </tr>
        <tr class="border">
          <td class="border">
xy_offset
          </td>
          <td class="border">
筆中心のoffset座標
          </td>
          <td class="border">
xy_offset={ox,oy}
          </td>
        </tr>
        <tr class="border">
          <td class="border">
xy_fixed
<br>
<span class="run">Ver.1.30.7追加</span>
<br>
<span class="clear">Ver.1.32.7更新</span>
          </td>
          <td class="border">
offset後xyのcanvas座標
          </td>
          <td class="border">
xy_fixed(f)=xy(f)+xy_offset
<br>
・offsetを含む出力座標
<br>
<span class="clear">・特殊modeでmarkerを表示</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
grid-snap
<br>
<span class="clear">Ver.1.32.7訂正</span>
<br>
<span class="run">Ver.1.36.7更新</span>
          </td>
          <td class="border">
直近のgrid点に<span class="clear"><del>xy_fixed</del>
<br>
xy_pointer</span>をsnap
          </td>
          <td class="border">
<span class="run"><del>特殊mode選択状態</del>Ver.1.36.7廃止</span>
<br>
<span class="run">grid-snap有効状態</span>
<br>
grid表示状態
          </td>
        </tr>
        <tr class="border">
          <td class="border">
通常mode
          </td>
          <td class="border">
mode=pen
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
特殊mode
          </td>
          <td class="border">
通常mode以外
<br>
Key操作で代用可能なmode
          </td>
          <td class="border">
<span class="clear"><del>W&le;0</del>Ver.1.33.7廃止</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
line(f)
          </td>
          <td class="border">
frame間の筆中心line
          </td>
          <td class="border">
line上線分の2点
<br>
xy(f-1)
<br>
xy(f)
          </td>
        </tr>
        <tr class="border">
          <td class="border">
vline(f)
          </td>
          <td class="border">
筆中心lineの垂線
          </td>
          <td class="border">
vline上線分の2点
<br>
xym(f)=xy(f)-rdxyk(f)
<br>
xyp(f)=xy(f)+rdxyk(f)
<br>
<br>
rot=(0,1:-1,0)
<br>
k=(w(f)/2)/len
<br>
rdxyk(f)=rot*dxy(f)*k={dy(f),-dx(f)}*k
          </td>
        </tr>
        <tr class="border">
          <td class="border">
tetragon(f)
          </td>
          <td class="border">
2vlineの四辺形
          </td>
          <td class="border">
四辺形の2辺
<br>
vline(f-1)
<br>
vline(f)
          </td>
        </tr>
        <tr class="border">
          <td class="border">
f=0~
          </td>
          <td class="border">
pointer-move検知frame回数
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
f=down
          </td>
          <td class="border">
pointer-down検知frame
          </td>
          <td class="border">
f=0
          </td>
        </tr>
        <tr class="border">
          <td class="border">
f=move
          </td>
          <td class="border">
pointer-move検知frame
<br>
line描画frame
          </td>
          <td class="border">
f=down+1~up-1
          </td>
        </tr>
        <tr class="border">
          <td class="border">
f=up
          </td>
          <td class="border">
pointer-up検知frame
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
1tap
          </td>
          <td class="border">
canvasを1tapする行為
          </td>
          <td class="border">
down -> upが理想
<br>
・move検知なしでline描画なし
          </td>
        </tr>
        <tr class="border">
          <td class="border text-center run" colspan="2">
1tap||line描画
<br>
<span class="clear">Ver.1.29.7更新</span>
          </td>
          <td class="border run">
eventの無効条件
<br>
<span class="clear">・filter実行中</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
layer
<br>
<span class="run">Ver.1.19.4追加</span>
          </td>
          <td class="border">
canvasの階層
          </td>
          <td class="border">
前面fg: 1筆lines毎に背面に合成
<br>
中面mg: 表示用
<br>
背面bg: 全linesのdownload対象
          </td>
        </tr>
        <tr class="border">
          <td class="border">
fg
<br>
<span class="clear">Ver.1.32.7更新</span>
          </td>
          <td class="border">
fore-ground
          </td>
          <td class="border">
fg-filter
<br>
fg-image-file
<br>
<span class="clear">marker@特殊mode</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
mg
<br>
<span class="run">Ver.1.10.2追加</span>
<br>
<span class="clear">Ver.1.37.7更新</span>
          </td>
          <td class="border">
middle-ground
          </td>
          <td class="border">
<span class="clear">gridColor</span>
<br>
grid
          </td>
        </tr>
        <tr class="border">
          <td class="border">
bg
<br>
<span class="run">Ver.1.8.1追加</span>
          </td>
          <td class="border">
back-ground
          </td>
          <td class="border">
bgcolor
<br>
bg-filter
<br>
bg-image-file
          </td>
        </tr>
        <tr class="border">
          <td class="border">
rgba
          </td>
          <td class="border">
pixelのRGBA
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border text-center selection" colspan="3">
URL-parameter
          </td>
        </tr>
        <tr class="border selection">
          <td class="border">
history_len_max=1~10000
<br>
<span class="run">Ver.1.14.4追加</span>
          </td>
          <td class="border">
履歴の保存回数
          </td>
          <td class="border">
default=10
          </td>
        </tr>
        <tr class="border selection">
          <td class="border">
decDigit=0~17
<br>
<span class="run">Ver.1.14.4追加</span>
          </td>
          <td class="border">
svg出力の小数点以下桁数
          </td>
          <td class="border">
default=1
          </td>
        </tr>
        <tr class="border selection">
          <td class="border">
Nwrap=1~256
<br>
<span class="run">Ver.1.15.4追加</span>
          </td>
          <td class="border">
塗りつぶしの周回数
          </td>
          <td class="border">
default=16
          </td>
        </tr>
        <tr class="border selection">
          <td class="border">
gridColor
<br>
<span class="run">Ver.1.37.7追加</span>
          </td>
          <td class="border">
grid色
          </td>
          <td class="border">
default=#00000033||#ffffff55
          </td>
        </tr>
        <tr class="border selection">
          <td class="border">
gridWidth[px]
<br>
<span class="run">Ver.1.37.7追加</span>
          </td>
          <td class="border">
grid幅
          </td>
          <td class="border">
default=0.5
          </td>
        </tr>
        <tr class="border jF">
          <td class="border text-center" colspan="2">
shortcut-Key=KeyA~Z||Digit0~9
<br>
<span class="run">Ver.1.19.4更新</span>
<br>
<span class="clear">Ver.1.22.6更新</span>
          </td>
          <td class="border">
event発火のtiming
<br>
<span class="run">・buttonの代用: key-down</span>
<br>
<span class="condition">・特殊modeの代用: Key@pointer-down -> pointer-up</span>
<br>
<br>
eventの排他制御
<br>
<span class="run">・複数Keyの同時押し</span>
<br>
<br>
発火の無効条件
<br>
<span class="run">・line描画中</span>
<br>
・ctrl/shift-Key押下中
<br>
・input要素active中（checkbox含む）
<br>
<span class="run">・select要素active中</span>
<br>
<br>
<span class="clear">操作性の対策を追加</span>
<br>
・pointer-down検知でactive要素の解除
          </td>
        </tr>
        <tr class="border jF">
          <td class="border">
eraser
<br>
<span class="run">Ver.1.34.7追加</span>
          </td>
          <td class="border">
A有効の消しgom
          </td>
          <td class="border">
default=KeyR
          </td>
        </tr>
        <tr class="border jF">
          <td class="border">
eraser_A100
<br>
<span class="run">Ver.1.34.7追加</span>
          </td>
          <td class="border">
A=100の消しgom
          </td>
          <td class="border">
default=KeyF
          </td>
        </tr>
        <tr class="border jF">
          <td class="border">
bucket
<br>
<span class="run">Ver.1.16.4追加</span>
          </td>
          <td class="border">
塗りつぶし
          </td>
          <td class="border">
default=KeyB
          </td>
        </tr>
        <tr class="border jF">
          <td class="border">
circle
<br>
<span class="run">Ver.1.20.4追加</span>
          </td>
          <td class="border">
円
          </td>
          <td class="border">
default=KeyG
          </td>
        </tr>
        <tr class="border jF">
          <td class="border">
rectangle
<br>
<span class="run">Ver.1.20.4追加</span>
          </td>
          <td class="border">
長方形
          </td>
          <td class="border">
default=KeyT
          </td>
        </tr>
        <tr class="border jF">
          <td class="border">
picker
<br>
<span class="run">Ver.1.31.7追加</span>
          </td>
          <td class="border">
color picker
          </td>
          <td class="border">
default=KeyY
          </td>
        </tr>
        <tr class="border jF">
          <td class="border">
draw
<br>
<span class="run">Ver.1.35.7追加</span>
          </td>
          <td class="border">
text-draw実行
          </td>
          <td class="border">
default=KeyE
          </td>
        </tr>
        <tr class="border jF">
          <td class="border">
run
<br>
<span class="run">Ver.1.17.4追加</span>
          </td>
          <td class="border">
text-filter実行
          </td>
          <td class="border">
default=KeyW
          </td>
        </tr>
        <tr class="border jF">
          <td class="border">
&lt;&lt;
<br>
<span class="run">Ver.1.16.4追加</span>
          </td>
          <td class="border">
描画戻る
          </td>
          <td class="border">
default=KeyS
          </td>
        </tr>
        <tr class="border jF">
          <td class="border">
&gt;&gt;
<br>
<span class="run">Ver.1.16.4追加</span>
          </td>
          <td class="border">
描画進む
          </td>
          <td class="border">
default=KeyD
          </td>
        </tr>
        <tr class="border jF">
          <td class="border">
clear
<br>
<span class="run">Ver.1.16.4追加</span>
          </td>
          <td class="border">
全消去
          </td>
          <td class="border">
default=KeyA
          </td>
        </tr>
        <tr class="border jF">
          <td class="border">
checkbox-config
<br>
<span class="run">Ver.1.38.7追加</span>
          </td>
          <td class="border">
config開閉
          </td>
          <td class="border">
default=KeyP
          </td>
        </tr>
        <tr class="border jF">
          <td class="border">
checkbox-snap
<br>
<span class="run">Ver.1.38.7追加</span>
          </td>
          <td class="border">
snap切替
          </td>
          <td class="border">
default=KeyO
          </td>
        </tr>
        <tr class="border selection">
          <td class="border">
URLの設定例
<br>
<span class="clear">Ver.1.41.8更新</span>
          </td>
          <td class="border">
index.html?
<br>
pressure=true&amp;
<br>
<span class="run">auto-config=false</span>&amp;
<br>
W=20&amp;
<br>
RGB=orange&amp;
<br>
<span class="run">bgcolor=rgba(255,192,203,1.0)</span>&amp;
<br>
canvas-width=200&amp;
<br>
ox=-20&amp;
<br>
oy=-20&amp;
<br>
<span class="run">
history_len_max=20&amp;
<br>
decDigit=3&amp;
<br>
&lt;&lt;=KeyU&amp;
<br>
clear=Digit1
</span>
          </td>
          <td class="border">
色指定の方法
<br>
・color名（white等）
<br>
<span class="run">・rgba(R,G,B=0~255,A=0~1)</span>
<br>
・HEX形式は使用不可（#000等）
<br>
<br>
以降のUIよりURL-parameterを優先
<br>
<span class="clear">・second-url-parametersはHEX形式の色指定可</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border text-center run" colspan="3">
UI
          </td>
        </tr>
        <tr class="border">
          <td class="border">
mode=pen||bucket||...
<br>
<span class="run">Ver.1.33.7追加</span>
          </td>
          <td class="border">
描画mode
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
pressure=false||true
          </td>
          <td class="border">
筆圧入力の有効化
          </td>
          <td class="border">
w(p)=W*p(f)
<br>
・対応環境p(f)=e.pressure
<br>
・非対応環境p(f)=0.5
          </td>
        </tr>
        <tr class="border">
          <td class="border">
black=false||true
          </td>
          <td class="border">
page背景色の黒色化
          </td>
          <td class="border">
canvas描画に影響なし
          </td>
        </tr>
        <tr class="border">
          <td class="border">
auto-config=false||true
<br>
<span class="run">Ver.1.24.6追加</span>
          </td>
          <td class="border">
config自動入力の有効化
          </td>
          <td class="border">
W入力欄左側のcheckbox
<br>
<br>
W&gt;0のchange検知で
<br>
A/w_th/len_th/in/outを自動入力
<br>
<br>
A初期化の条件
<br>
0&lt;W&lt;5 &amp;&amp; A&ge;0 -> A=-30
<br>
W&ge;5 &amp;&amp; A&lt;0 -> A=10
          </td>
        </tr>
        <tr class="border">
          <td class="border">
W=0~[px]
          </td>
          <td class="border">
line幅の最大値
          </td>
          <td class="border">
0&le;w(f)&le;W
          </td>
        </tr>
        <tr class="border">
          <td class="border">
mode=eraser
<br>
<span class="run">Ver.1.34.7追加</span>
          </td>
          <td class="border">
A有効の消しgom機能
          </td>
          <td class="border">
canvas前面に描画後（source-over）、
<br>
背面に合成（destination-out）
<br>
・svg出力はA有効のwhiteで代替（source-over）
<br>
<span class="run">・KeyR+1dragで代用可</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
mode=eraser_A100
<br>
<span class="run">Ver.1.34.7追加</span>
          </td>
          <td class="border">
A=100の消しgom機能
          </td>
          <td class="border">
canvas前面に描画後（source-over）、
<br>
背面に合成（destination-out）
<br>
・svg出力はA=100のwhiteで代替（source-over）
<br>
<span class="run">・KeyF+1dragで代用可</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
mode=pen
          </td>
          <td class="border">
defaultの筆pen機能
          </td>
          <td class="border">
通常mode=0
          </td>
        </tr>
        <tr class="border">
          <td class="border">
mode=bucket
<br>
<span class="clear"><del>W=0</del>Ver.1.33.7廃止</span>
<br>
<span class="run">Ver.1.15.4追加</span>
<br>
<span class="clear">Ver.1.26.7更新</span>
<br>
<span class="condition">Ver.1.30.7更新</span>
          </td>
          <td class="border">
ink色の塗りつぶし機能
          </td>
          <td class="border">
canvas背面に適用
<br>
始点=xy_pointer(<span class="condition">up</span>)
<br>
<span class="condition">・grid-snapあり</span>
<br>
<span class="clear">・svg出力に対応（source-over前提）</span>
<br>
　|A|=100のみpng互換性あり
<br>
<span class="run">・KeyB+1tapで代用可</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
mode=circle
<br>
<span class="clear"><del>W=-1</del>Ver.1.33.7廃止</span>
<br>
<span class="run">Ver.1.20.4追加</span>
<br>
<span class="clear">Ver.1.39.7更新</span>
          </td>
          <td class="border">
circle(fill)描画機能
          </td>
          <td class="border">
canvas前面に描画
<br>
中心=xy_pointer(down)
<br>
半径=|xy_pointer(up)-xy_pointer(down)|
<br>
・grid-snapあり
<br>
<span class="clear">・second-url-parameters有効</span>
<br>
<span class="run">・KeyG+1dragで代用可</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
mode=rectangle
<br>
<span class="clear"><del>W=-2</del>Ver.1.33.7廃止</span>
<br>
<span class="run">Ver.1.20.4追加</span>
<br>
<span class="clear">Ver.1.39.7更新</span>
          </td>
          <td class="border">
rectangle(fill)描画機能
          </td>
          <td class="border">
canvas前面に描画
<br>
対角線分の2点
<br>
xy_pointer(down)
<br>
xy_pointer(up)
<br>
・grid-snapあり
<br>
<span class="clear">・second-url-parameters有効</span>
<br>
<span class="run">・KeyT+1dragで代用可</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
mode=picker
<br>
<span class="clear"><del>W=-3</del>Ver.1.33.7廃止</span>
<br>
<span class="run">Ver.1.31.7追加</span>
          </td>
          <td class="border">
color picker機能
          </td>
          <td class="border">
canvas背面から取得
<br>
始点=xy_pointer(up)
<br>
・grid-snapあり
<br>
<span class="run">・KeyY+1tapで代用可</span>
<br>
<span class="clear"><del>・auto-configのA初期化を対策予定</del>Ver.1.33.7済み</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
stabi=0~100
<br>
<span class="run">Ver.1.13.4追加</span>
<br>
<span class="run">Ver.1.18.4更新</span>
          </td>
          <td class="border">
手ぶれ補正強度
          </td>
          <td class="border">
<del>xy_pointerの単純移動平均</del>
<br>
(stabi+1)点の算術平均
<br>
stabi: xy_oldの直近点数
<br>
1点: xy_pointerの最新点
<br>
xy=(xy_old総和+xy_pointer)/(stabi+1)
<br>
・総和の無駄処理あり
<br>
<br>
<span class="run">float設定時に重みwを追加</span>
<br>
istabi=floor(stabi)
<br>
w=stabi-istabi
<br>
xy_old_ave=xy_old総和/istabi
<br>
xy=w*xy_old_ave+(1-w)*xy_pointer
<br>
<br>
互換性（ほぼ等価）
<br>
・stabi=1　⇔　stabi=1+1/2=1.5
<br>
・stabi=2　⇔　stabi=2+2/3=2.666...
<br>
・stabi=3　⇔　stabi=3+3/4=3.75
<br>
・stabi=4　⇔　stabi=4+4/5=4.8
<br>
・stabi=5　⇔　stabi=5+5/6=5.833...
<br>
・stabi=99　⇔　stabi=99.990...
<br>
・stabi=n　⇔　stabi=n+n/(n+1)
          </td>
        </tr>
        <tr class="border">
          <td class="border">
RGB=#000000~#ffffff
          </td>
          <td class="border">
lineのink色RGB
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
A=<span class="run">-100</span>~100[%]
<br>
<span class="run">Ver.1.6.1追加</span>
          </td>
          <td class="border">
lineのink不透明度alpha=|A|
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
A=-100~0[%]
<br>
<span class="run">Ver.1.6.1追加</span>
<br>
<span class="run">Ver.1.7.1更新</span>
          </td>
          <td class="border">
<br>
fg-filter機能<span class="clear">（flat_upp互換）</span>
          </td>
          <td class="border">
canvas前面に適用
<br>
r+g+b+a&gt;0
<br>
a=min(a, |A|)
<br>
a&le;|A|
<br>
<br>
svg出力
<br>
<del>・png/svgの整合性なし（履歴を含む）</del>
<br>
<span class="run">
・png/svgの整合性を確保
</span>
<br>
<span class="clear">
・Ver.1.6.1互換機能を追加
</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
bg<span class="run">color</span>
<br>
<span class="run">Ver.1.15.4修正</span>
          </td>
          <td class="border">
canvas背景色
          </td>
          <td class="border">
canvas背面に描画
          </td>
        </tr>
        <tr class="border">
          <td class="border">
canvas-width=16~1280[px]
          </td>
          <td class="border">
canvas幅
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
canvas-height=16~1280[px]
          </td>
          <td class="border">
canvas高さ
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
cap=butt||round||square
          </td>
          <td class="border">
line端の形状
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
composite
<br>
<span class="run">Ver.1.8.1更新</span>
          </td>
          <td class="border">
lineのRGBA合成方法
          </td>
          <td class="border">
同期処理（shadow描画を除く）
<br>
・canvas前面にlineを逐次合成
<br>
<br>
<span class="run">非同期処理を追加</span>
<br>
・up検知でcanvas前面から背面に合成
          </td>
        </tr>
        <tr class="border">
          <td class="border">
ox[px]
<br>
<span class="run">Ver.1.5.1更新</span>
          </td>
          <td class="border">
筆中心のx方向offset
          </td>
          <td class="border">
          </td>
        </tr>
        <tr class="border">
          <td class="border">
oy[px]
<br>
<span class="run">Ver.1.5.1更新</span>
          </td>
          <td class="border">
筆中心のy方向offset
          </td>
          <td class="border">
           </td>
        </tr>
        <tr class="border">
          <td class="border">
w_th=0~[px]
<br>
<span class="run">Ver.1.4.1追加</span>
          </td>
          <td class="border">
1frame内
<br>
w可変のw閾値
          </td>
          <td class="border">
w(f-1)+w(f)&gt;0
<br>
(min(w(f-1),w(f))&lt;w_th)?
<br>
fill(tetragon):
<br>
stroke(line)
          </td>
        </tr>
        <tr class="border">
          <td class="border">
<span class="run">len_th</span>=0~[px]
<br>
<span class="run">Ver.1.4.1更新</span>
          </td>
          <td class="border">
frame間
<br>
w可変のlen閾値
          </td>
          <td class="border">
dlen(f)=len(f)-len_th
<br>
w(f)=w(f-1)+dw(dlen)
          </td>
        </tr>
        <tr class="border">
          <td class="border">
in
          </td>
          <td class="border">
fade-in強度
          </td>
          <td class="border">
dlen&lt;0
<br>
dw(dlen) = (in&lt;0)? dlen*in: in;
          </td>
        </tr>
        <tr class="border">
          <td class="border">
out
          </td>
          <td class="border">
fade-out強度
          </td>
          <td class="border">
dlen&gt;0
<br>
dw(dlen) = (out&lt;0)? dlen*out: -out;
          </td>
        </tr>
        <tr class="border">
          <td class="border">
sh=<span class="run">-100</span>~
<br>
<span class="run">Ver.1.21.4追加</span>
          </td>
          <td class="border">
shadowのぼかし強度|sh|
          </td>
          <td class="border">
svg出力
<br>
・filter効果範囲のclip対策
          </td>
        </tr>
        <tr class="border">
          <td class="border">
sh=-100~0
<br>
<span class="run">Ver.1.21.4追加</span>
          </td>
          <td class="border">
inkのにじみ強度|sh|
          </td>
          <td class="border">
fg-filter後、canvas前面に適用
<br>
・canvas背面への合成回数=|sh|+1
<br>
<br>
svg出力
<br>
・svg-file-size=|sh|+1倍
<br>
・sh入力欄の右側に&ge;-20(svg)を表示
<br>
・download-svgの右側にMBを表示
          </td>
        </tr>
        <tr class="border">
          <td class="border text-center run" colspan="3">
png前後処理
          </td>
        </tr>
        <tr class="border">
          <td class="border">
snap=false||true
<br>
<span class="run">Ver.1.36.7追加</span>
          </td>
          <td class="border">
grid-snapの有効化
          </td>
          <td class="border">
<span class="run"><del>特殊modeの自動snap</del>Ver.1.36.7廃止</span>
<br>
・grid-snap時、stabi無効
          </td>
        </tr>
        <tr class="border">
          <td class="border">
png前処理
<br>
grid-width=0~[px]
<br>
grid-height=0~[px]
<br>
<span class="run">Ver.1.10.2追加</span>
<br>
<span class="clear">Ver.1.37.7更新</span>
          </td>
          <td class="border">
grid表示機能
          </td>
          <td class="border">
canvas中面に描画
<br>
<span class="clear">・bgcolorでgrid色を切替</span>
<br>
<span class="clear">・gridColorを追加</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
png/svg後処理
<br>
mosaic-in-grid
<br>
with-svg=false||true
<br>
<span class="run">Ver.1.12.4追加</span>
          </td>
          <td class="border">
fg-filter機能（mosaic）
<br>
svg反映の有効化
          </td>
          <td class="border">
canvas前面に適用
<br>
off: 無効
<br>
RGBA: UI設定値<span class="clear">（flat_all互換）</span>
<br>
min: grid内の最小値
<br>
mean: grid内の算術平均値
<br>
max: grid内の最大値
<br>
<br>
svg出力
<br>
・dot絵変換の目安
<br>
fg-image-file ->
<br>
grid1x1 ->
<br>
mosaic-min ->
<br>
with-svg-checked ->
<br>
1tap ->
<br>
download-svg ->
<br>
svg-file-size=O(10MB)
          </td>
        </tr>
        <tr class="border">
          <td class="border">
png後処理
<br>
RGB=-1~255
<br>
A=-1~100[%]
<br>
<span class="run">Ver.1.7.1追加</span>
          </td>
          <td class="border">
<span class="clear">
bg-filter機能（flat）
<br>
Ver.1.6.1互換
</span>
          </td>
          <td class="border">
canvas背面に適用
<br>
flat_low: 設定値の下側
<br>
flat_all: 設定値の両側（2値化）
<br>
flat_upp: 設定値の上側
<br>
<span class="clear">
・RGBA各設定値に平滑化
<br>
・設定値&lt;0の要素は無効
</span>
<br>
・履歴保存あり
          </td>
        </tr>
        <tr class="border">
          <td class="border">
png/svg後処理
<br>
second-url-parameters
<br>
<span class="run">Ver.1.39.7追加</span>
<br>
<span class="clear">Ver.1.41.8更新</span>
          </td>
          <td class="border">
URL-parameter互換のformat
          </td>
          <td class="border">
circle/rectangle有効
<br>
fillStyle（svg互換のため、strokeとsetで有効）
<br>
strokeStyle（svg互換のため、fillとsetで有効）
<br>
blur
<br>
lineWidth
<br>
<br>
text-draw無効
<br>
lineWidth
<br>
bgcolor
<br>
gridColor
<br>
gridWidth
<br>
<br>
設定不可の項目
<br>
history_len_max
<br>
decDigit
<br>
shortcut-Key
<br>
<br>
parameter初期化の一例
<br>
bgcolor=#fff -> bgcolor=
<br>
<span class="clear">・変更時、canvasのresetあり</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
png/svg後処理
<br>
text-draw
<br>
draw
<br>
<span class="run">Ver.1.35.7追加</span>
          </td>
          <td class="border">
text-draw機能
<br>
<a href="../01_calc_simple/manual.html#span-out-UI-graphing-string-path">[manual]Calculator</a>参照
          </td>
          <td class="border">
draw実行後、canvas背面にtextを描画
<br>
・second-url-parameters有効
<br>
・parameter未指定時
<br>
fontSize=W
<br>
fillStyle=bgcolor
<br>
strokeStyle=rgba(R,G,B,|A|/100)
<br>
blur=|sh|
<br>
・描画するtextを入力
<br>
・path=pen最終の1筆lines
<br>
・履歴保存あり
          </td>
        </tr>
        <tr class="border">
          <td class="border">
png後処理
<br>
text-filter
<br>
run
<br>
<span class="run">Ver.1.17.4追加</span>
          </td>
          <td class="border">
bg-filter機能（任意）
<br>
<a href="../01_calc_simple/manual.html#span-out-UI-graphing-filter">[manual]Calculator</a>参照
          </td>
          <td class="border">
run実行後、canvas背面に適用
<br>
・履歴保存あり
<br>
<br>
適用例）
<br>
・area塗りつぶし⇒sepia-tone化
<br>
fiin[area[0,0,256,256],,red,16]:
<br>
r[0.9]:g[0.7]:b[0.4]
<br>
・edge抽出
<br>
rgb[-1,-1,-1,-1,8,-1,-1,-1,-1]
          </td>
        </tr>
        <tr class="border">
          <td class="border">
png前処理
<br>
fg-image-file
<br>
<span class="run">Ver.1.11.4追加</span>
<br>
<span class="clear">Ver.1.24.7修正</span>
          </td>
          <td class="border">
local fileのread機能
          </td>
          <td class="border">
read完了後、canvas前面に合成
<br>
・履歴保存なし
<br>
・canvasのre-sizeなし
<br>
・fg-filter適用可（A&lt;0を含む）
<br>
<span class="clear">・A&ge;0のalpha値を無効に修正</span>
<br>
<span class="clear">・1tapで入力欄のfile名を消去</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
png前処理
<br>
bg-image-file
<br>
<span class="run">Ver.1.8.1追加</span>
<br>
<span class="run">Ver.1.11.4更新</span>
<br>
<span class="clear">Ver.1.24.7修正</span>
          </td>
          <td class="border">
local fileのread機能
          </td>
          <td class="border">
read完了後、canvas背面に合成
<br>
・履歴保存あり
<br>
<span class="run">・canvasのre-sizeあり</span>
<br>
・bg-filter適用可
<br>
<span class="clear">・Aのalpha値を無効に修正</span>
<br>
<span class="clear">・1tapで入力欄のfile名を消去</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
download-png
<br>
<span class="run">download-svg</span>
<br>
<span class="run">Ver.1.2.0追加</span>
          </td>
          <td class="border">
download機能
          </td>
          <td class="border">
double-click後、canvas背面を保存
          </td>
        </tr>
        <tr class="border">
          <td class="border text-center run" colspan="2">
実行button
<br>
<span class="clear">Ver.1.28.7更新</span>
          </td>
          <td class="border run">
実行の無効条件
<br>
<span class="clear">・line描画中</span>
<br>
<span class="clear">・filter実行中</span>
          </td>
        </tr>
        <tr class="border">
          <td class="border">
clear
<br>
<span class="run">
&lt;&lt;
<br>
&gt;&gt;
</span>
<br>
<span class="run">Ver.1.1.0追加</span>
<br>
<span class="run">Ver.1.23.6更新</span>
          </td>
          <td class="border">
履歴機能
          </td>
          <td class="border">
canvas背面に適用
<br>
clear: 全消去
<br>
&lt;&lt;: 描画を戻る
<br>
&gt;&gt;: 描画を進む
<br>
<br>
<span class="run">canvasのre-size機能を追加</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</body>

</html>
